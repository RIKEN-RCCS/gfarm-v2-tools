# File-Courier

Packs and transfers small many files.

## File-Courier Design

* Objectives
  * Archive files up to 25 GB in a single file (uncompressed size)
  * Transfer via rsync or gfpcopy to enable checksum checks
  * (Make restartable on failures in archiving and transferring)

* Implementation
  * Create an index-file (grouped by 25 GB by the sum of file sizes)
  * Archive+transfer by looking up the index-file
  * Make an archive once locally (to use rsync)

## Shell Scripts

__make-index.sh__ creates an index-file that lists files in a
directory.  An index-file consists of lines "size file-name" separated
by a four digits entry "nnnn".  Lines are grouped by a "nnnn" entry,
so as to limit the sum of the sizes in a group.  It first outputs
lines of "size file-name" and then calls "group-files.awk" to split
the lines to groups by the sum of the sizes.

__group-files.awk__ is a subprogram in "make-index.sh".

__pack-copy-files.sh__ archives and transfers a group of files.  It
calls "zip_-@" on the output from "catalog-files.sh".
"catalog-files.sh" lists files in a certain group in the index-file.

__catalog-files.sh__ is a subprogram in "pack-copy-files.sh".

## Notes

zip_-@ (taking file names from stdin) accepts escaped "\\n" in names
that are generated by find_-printf_"%P".
